@model PPWLib.Models.Item.ItemEditModel

@{
    ViewBag.Title = string.Concat(string.Format(Resources.Resource.InventoryFormat, Resources.Resource.Transfer), Model.Item.itmCode);
    var title = string.Concat(string.Format(Resources.Resource.InventoryFormat, Resources.Resource.Transfer), ":<span class='text-primary'>", Model.Item.itmCode, "</span>");
    List<string> batpolist = Model.PoBatVQList.Select(x => x.pocode).Distinct().ToList();
    List<string> snpolist = Model.SnVtList.Select(x => x.pocode).Distinct().ToList();
}

<h4 class="mb-4" data-shopnames="@string.Join(",",Model.ShopNames)">@Html.Raw(title)</h4>

<div class="container">
    @Html.AntiForgeryToken()

    @for (int i=0;i<Model.ShopNames.Count;i++)
    {
        var shopname = Model.ShopNames[i];
        var shop = Model.Shops[i];
        @Html.Partial("_TransferModal", null, new ViewDataDictionary { { "itemcode", Model.Item.itmCode }, { "shopname", shopname },{"shop",shop }, { "batpolist", batpolist }, { "batchqtylist", Model.BatchQtyList }, { "delbatqtylist", Model.BatDelQtyList }, { "pbvqlist", Model.PoBatVQList }, { "qty", Model.Item.QuantityAvailable }, { "itemOptions", Model.Item.ItemOptions }, { "batsnvtlist", Model.BatSnVtList }, { "snvtlist", Model.SnVtList }, { "vtqtylist", Model.VtQtyList },{"i",i }, { "stCode", Request.QueryString["stCode"] } })
    }

    <button type="button" id="btnSave" class="btn btn-success">@Resources.Resource.Save</button>
    <div class="mt-4">
        @Html.ActionLink(Resources.Resource.BackToList, "Transfer")
    </div>
    
</div>



@Html.Partial("_WaitingModal")

<div id="infoblk" data-primarylocation="@Model.PrimaryLocation" data-jsonpobatvqlist="@System.Text.Json.JsonSerializer.Serialize(Model.PoBatVQList)" data-jsonbatchqtylist="@System.Text.Json.JsonSerializer.Serialize(Model.BatchQtyList)" data-jsonbatsnvtlist="@System.Text.Json.JsonSerializer.Serialize(Model.BatSnVtList)" data-jsonitemoptions="@System.Text.Json.JsonSerializer.Serialize(Model.Item.ItemOptions)" data-jsonsnvtlist="@System.Text.Json.JsonSerializer.Serialize(Model.SnVtList)" data-jsonvtqtylist="@System.Text.Json.JsonSerializer.Serialize(Model.VtQtyList)" data-itemoptions="@System.Text.Json.JsonSerializer.Serialize(Model.Item.ItemOptions)" data-stcode="@Request.QueryString["stCode"]"></div>

<script src="~/Scripts/ts/js/itemtransfer/transfer.js?v=@CommonHelper.GetVersionRandomNo()"></script>

