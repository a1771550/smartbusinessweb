@model HotListEditModel
@using PagedList.Mvc;
@{
    ViewBag.Title = Resources.Resource.HotList;
    int rand = CommonHelper.GetVersionRandomNo();
    string idlist = string.Join(",", Model.IdList);
}
<link href="~/Scripts/paginationjs/pagination.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="~/Content/hotlist.css?v=@rand" />

<h3>@ViewBag.Title</h3>

<p class="my-3">
    @Html.ActionLink(Resources.Resource.Add, "Edit", null, new { @class = "btn btn-info" })
</p>

<div id="norecordfound" class="container hide">@Resources.Resource.NoDataFound</div>
@using (Html.BeginForm("Index", "HotList", FormMethod.Post, new { @id = "frmhotlist" }))
{
    <div class="container">

        <div class="row justify-content-center py-3" style="margin-left:-5em;">
            @Html.Partial("_DatesRange", null, new ViewDataDictionary { { "DateFromTxt", Model.DateFromTxt }, { "DateToTxt", Model.DateToTxt } })
        </div>

        <div class="row justify-content-center mb-2">
            <button id="btnFilter" type="submit" class="btn btn-success mr-sm-3">@Resources.Resource.Submit</button>
            <button id="btnReload" type="button" role="button" class="btn btn-warning">@Resources.Resource.Reload</button>
        </div>
    </div>

    <hr />

    <div class="container" style="width:105%;">
        <div id="searchblk" class="row justify-content-center form-inline mb-2 my-4">
            <div class="form-group">
                <input type="text" class="form-control" id="txtKeyword" name="Keyword" placeholder="@Resources.Resource.KeywordRequired" value="@Model.Keyword" />
                <button id="btnSearch" type="submit" role="button" class="btn btn-primary ml-4">@Resources.Resource.Search</button>
                <button id="btnReset" type="button" role="button" class="btn btn-secondary ml-4">@Resources.Resource.Reset</button>
            </div>
        </div>
    </div>
}
<table id="tblhotlist" class="table table-bordered  table-hover table-condensed">
    <thead class="gray-header">
        <tr>
            <th>
                @Resources.Resource.Name
            </th>
            <th>@Resources.Resource.SalesPerson</th>
            <th>
                @Resources.Resource.CreateTime
            </th>
            <th>
                @Resources.Resource.ModifyTime
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model.PagingHotListList)
        {
            <tr data-id="@item.Id" class="pointer">
                <td>
                    @Html.DisplayFor(modelItem => item.hoName)
                </td>
                <td>@Html.DisplayFor(modelItem => item.SalesPersonName)</td>
                <td>
                    @Html.DisplayFor(modelItem => item.CreateTime)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.ModifyTime)
                </td>
                <td>
                    <a class="btn btn-primary detail" href="#" data-id="@item.Id" data-name="@item.hoName" data-salesmanname="@item.SalesPersonName" data-createtime="@item.CreateTimeDisplay" data-modifytime="@item.ModifyTimeDisplay" data-desc="@item.hoDescription" data-salesmanresponsible="@item.hoSalesmanResponsible" role="button">@Resources.Resource.Detail</a>
                    @Html.ActionLink(Resources.Resource.Edit, "Edit", new { id = item.Id }, new { @class = "btn btn-info", @role = "button" })
                    <a href="#" class="btn btn-danger remove" data-id="@item.Id" role="button">@Resources.Resource.Remove</a>

                </td>
            </tr>
        }
    </tbody>
</table>

@Html.AntiForgeryToken()

<div id="pagingblk" class="mx-3">
    <div class="row">
        @Html.PagedListPager(Model.PagingHotListList, PageNo => Url.Action("Index",
new { PageNo, SortOrder = Model.CurrentSortOrder, Keyword = Model.Keyword }))
    </div>
</div>

<input type="hidden" name="SortOrder" id="sortorder" value="@Model.SortOrder" />
<input type="hidden" id="sortcol" value="@Model.SortCol" />

<div id="infoblk" class="hide" data-apid="@ConfigurationManager.AppSettings["AccountProfileId"]" data-idlist="@idlist" data-hotlistdetailtxt="@string.Format(Resources.Resource.DetailFormat,Resources.Resource.HotList)" data-nametxt="@Resources.Resource.Name" data-salesmantxt="@Resources.Resource.SalesPerson" data-desctxt="@Resources.Resource.Description"></div>

<script type="text/javascript" src="~/Scripts/daterangepicker/moment.min.js"></script>
<script type="text/javascript" src="~/Scripts/daterangepicker/daterangepicker.min.js"></script>
<link rel="stylesheet" type="text/css" href="~/Scripts/daterangepicker/daterangepicker.css" />

<script src="~/Scripts/paginationjs/pagination.js"></script>

<script>
    $(document).ready(function () {
        initModals();
        initDatePickers(StartDayEnum.LastMonth, 'YYYY-MM-DD');
        $target = $('.pagination');
        $target.wrap('<nav aria-label="Page navigation"></nav>').find('li').addClass('page-item').find('a').addClass('page-link');

        let keyword = getParameterByName('Keyword');
        if (keyword !== null) {
            $('#txtKeyword').val(keyword);
        }
        $('.pagination li').addClass('page-item');
        $('#txtKeyword').focus();
    });
</script>

<script src="~/Scripts/ts/js/crm/contact/hotlist/hotlist.js?v=@rand"></script>
