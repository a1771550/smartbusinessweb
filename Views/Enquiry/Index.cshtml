@model EnquiryEditModel
@{
	ViewBag.Title = Resources.Resource.Enquiry;
	var rand = CommonHelper.GetVersionRandomNo();
	var totaltxt = CultureHelper.CurrentCulture == 2 ? string.Concat(Resources.Resource.Total, " ", Resources.Resource.Record, "s") : String.Concat(Resources.Resource.Total, "", Resources.Resource.Record);
	string addtocontacttxt = string.Format(Resources.Resource.AddTo, Resources.Resource.Contact);
	bool isassignor = Model.User.Roles.Any(x => x == RoleType.Admin || x == RoleType.SalesManager);
	const string mgturl = @"https://unpkg.com/@microsoft/mgt@2/dist/bundle/mgt-loader.js";
	string enquiryacc = ConfigurationManager.AppSettings["EnquiryEmail"];
}
<link href="~/Scripts/paginationjs/pagination.css" rel="stylesheet" type="text/css" />
<link href="~/Content/enquiry/index.css?v=@rand" rel="stylesheet" type="text/css" />
<link href="~/Content/enquiry/group/index.css?v=@rand" rel="stylesheet" type="text/css" />
<script src="@mgturl"></script>

<h3 class="clearfix">
	@ViewBag.Title
	<span id="addenq" class="btnsmall50 btn btn-warning float-right fa fa-plus" title="@string.Format(Resources.Resource.AddFormat, Resources.Resource.Enquiry)"></span>
</h3>

<div id="norecordfound" class="container hide">@Resources.Resource.NoDataFound</div>
@using (Html.BeginForm("Index", "Enquiry", FormMethod.Post, new { @id = "frmEnquiry" }))
{
	@Html.Partial("_AdvSearchBlk", null, new ViewDataDictionary { { "Keyword", Model.Keyword }, { "isassignor", isassignor }, { "additionalcls", "mt-4" }, { "GroupTxt", string.Format(Resources.Resource.AddToFormat, Resources.Resource.EnquiryGroup) } })

	@Html.Partial("_DrpLatestRecordCount")
}
<hr />
<mgt-msal2-provider client-id="84a18ff1-0613-4bb7-a88e-004fa6feab9e"></mgt-msal2-provider>
<mgt-login></mgt-login>
<mgt-get id="mgt-email" resource="" scopes="Mail.Read">
</mgt-get>

<div class="clearfix">
	<div class="float-right small">
		<div class="text-right"><span>@totaltxt: <span id="totalcount" class="font-weight-bold"></span></span></div>
	</div>
</div>
<div class="overflow-x">
	<table id="tblmails" class="table table-bordered table-hover table-condensed">
		<thead class="gray-header">
			<tr>
				@if (isassignor)
				{
					<th class="text-center checkbox"><input id="chkenqall" type="checkbox" class="form-check" /></th>
				}

				<th class="text-center datetime colheader" data-col="0" data-category="enReceivedDateTime">@Resources.Resource.DateTime</th>
				<th class="text-center subject colheader" data-col="1" data-category="enSubject">@Resources.Resource.Subject</th>
				<th class="text-center from colheader" data-col="2" data-category="enFrom">@Resources.Resource.From4Enquiry</th>
				<th class="text-center email colheader" data-col="3" data-category="enEmail">@Resources.Resource.Email</th>
				<th class="text-center phone colheader" data-col="4" data-category="enPhone">@Resources.Resource.Phone</th>
				<th class="text-center company colheader" data-col="5" data-category="enOrganization">@Resources.Resource.Organization</th>
				<th class="text-center contact colheader" data-col="6" data-category="enContact">@Resources.Resource.Contact</th>
				<th class="text-center fstatus colheader" data-col="7" data-category="followupstatus">@string.Format(Resources.Resource.FollowUpFormat, Resources.Resource.Status)</th>
				<th class="text-center fdate colheader" data-col="8" data-category="followupdate">@Resources.Resource.FollowUpDate</th>
				<th class="text-center sales colheader" data-col="9" data-category="salesperson">@Resources.Resource.SalesPerson</th>
				<th class="text-center attr">@Resources.Resource.CustomAttributes</th>
				@{
					string action = (isassignor) ? "action" : "action4sales";
				}
				<th class="text-center @action"></th>
			</tr>
		</thead>
		<tbody>
		</tbody>
	</table>
</div>

<div class="Pager my-4"></div>

<div id="sortCol" name="sortCol" value="@Model.SortCol"></div>

@Html.AntiForgeryToken()

@Html.Partial("_SalesmenModal")

@Html.Partial("_EnquiryGroupModal")

@Html.Partial("_AdvancedSearchModal", Model.GlobalAttrList)

<!--properties can be changed via js-->
@Html.Partial("_DropDownModal", null, new ViewDataDictionary { { "lbltxt", Resources.Resource.Salesmen }, { "drpId", "drpSalesman" }, { "forenquiry", true } })

@Html.Partial("_WaitingModal")
<div id="infoblk" data-assignsalestxt="@Resources.Resource.AssignToSalesman" data-isassignor="@isassignor" data-enquiryacc="@enquiryacc" data-currentoldestdate="@Model.CurrentOldestDate" data-enidlist="@JsonSerializer.Serialize(Model.EnIdList)" data-jsondicassignedsalesenqid="@Model.JsonDicAssignedSalesEnqId" data-currentcontactemaillist="@string.Join(",",Model.CurrentContactEmailList)" data-currentcontactphonelist="@string.Join(",",Model.CurrentContactPhoneList)" data-emailinusetxt="@Resources.Resource.ContactEmailInUseAlertMsg" data-phoneinusetxt="@Resources.Resource.ContactPhoneInUseAlertMsg" data-confirmprompt="@Resources.Resource.ConfirmContinue" data-assignsalesmanrequiredtxt="@Resources.Resource.AssignSalesmanRequired" data-sendmailprompt="@Resources.Resource.SendEmailNotification4AssignedSalespeoplePrompt" data-pagesize="@int.Parse(ConfigurationManager.AppSettings["MGTPageSize"])" data-confirmconverttocustomertxt="@string.Format(Resources.Resource.ConfirmFormat,Resources.Resource.ConvertToCustomer)" data-selectatleastoneenquirytxt="@string.Format(Resources.Resource.SelectAtLeastOne,Resources.Resource.Enquiry)"></div>

<script type="text/javascript" src="~/Scripts/daterangepicker/moment.min.js"></script>
<script type="text/javascript" src="~/Scripts/daterangepicker/daterangepicker.min.js"></script>
<link rel="stylesheet" type="text/css" href="~/Scripts/daterangepicker/daterangepicker.css" />

<script src="~/Scripts/ASPSnippets_Pager.min.js"></script>
<script src="~/Scripts/ts/js/customer/enquiry/index.js?v=@rand"></script>

