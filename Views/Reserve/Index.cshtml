@model PPWLib.Models.Item.ReserveEditModel
@{
	ViewBag.Title = string.Format(Resources.Resource.InventoryFormat, Resources.Resource.Reserve);
	int rand = CommonHelper.GetVersionRandomNo();	
}
<link href="~/Content/transfer.css?v=@rand" rel="stylesheet" type="text/css" />

<h2>@ViewBag.Title</h2>

@using (Html.BeginForm("Index", "Reserve", FormMethod.Get, new { @Id = "frmReserve" }))
{
	@Html.Partial("_ItemPagesCheckBox", null, new ViewDataDictionary { { "reserve", true } })

	<div class="form-inline mb-2 my-4 clearfix">
		<div class="form-group">
			<input type="text" class="form-control" id="txtStock" placeholder="@Resources.Resource.EnterItemCodeName" />
			<button id="btnSearch" type="button" class="btn btn-primary mx-1">@Resources.Resource.Search</button>
			<button id="btnReload" type="button" class="btn btn-warning mx-1">@Resources.Resource.Reload</button>
			<button id="btnList" type="button" class="btn btn-info mx-1" onclick="window.location.href = '/Reserve/List';">@Resources.Resource.List</button>
		</div>
	</div>


	<span class="small font-weight-bold"><span class="text-primary">@Resources.Resource.ReserveNumber:</span> <span id="stCode">@Model.ReserveNumber</span></span>


	<span class="mx-3 small font-weight-bold">
		<span class="text-success">@Resources.Resource.LastUpdateTime:</span>
		<span id="lastupdatetime">@Model.LastUpdateTime</span>
	</span>




	<div id="norecord" class="alert alert-warning">@Resources.Resource.NoDataFound</div>
	<table id="tblReserve" class="table table-bordered table-hover table-condensed overflow-auto">
		<thead class="gray-header">
			<tr class="">
				<th class="text-left colheader" data-col="0" data-order="@Model.CurrentSortOrder">@Resources.Resource.ItemCode</th>
				<th class="text-left">@Resources.Resource.Batch|@Resources.Resource.SerialNo|@Resources.Resource.ExpiryDate</th>
				<th class="text-left">@Resources.Resource.ItemVariations</th>
				<th class="text-left colheader" data-col="1" data-order="@Model.CurrentSortOrder">@Resources.Resource.Name/@Resources.Resource.Description</th>
				<th class="text-right"><span class="font-weight-bold">@Resources.Resource.OnHandStock</span></th>
				@foreach (var _shop in Model.ShopNames)
				{
					<th class="text-right">@_shop</th>
				}
				<th class="text-right"><span class="font-weight-bold">@Resources.Resource.ReservedQty</span></th>
			</tr>
		</thead>
		@foreach (var item in Model.PagingStockList)
		{
			var namedesctxt = item.NameDesc.Length > 40 ? item.NameDesc.Substring(0, 40) + "..." : item.NameDesc;			
		
			<tr>

				<td class="text-center">@item.itmCode</td>
				<td class="text-center itemdesc" data-desc="@item.NameDesc">@namedesctxt</td>

				<td class="text-center">@item.CreateTimeDisplay</td>
				<td class="text-center">@item.ModifyTimeDisplay</td>

				<td class="text-center">@abssdisplay</td>

				<td>
					<a class="btn btn-info" role="button" href="/Item/Edit?itemId=@item.itmItemID&referrer=Index">@Resources.Resource.Edit</a>
					<a class="btn btn-outline-danger itemremove @disabled" role="button" href="#" data-id="@item.itmItemID">@Resources.Resource.Remove</a>
				</td>
			</tr>
		}
	</table>
	<br />
	<div class="Pager"></div>
}

@Html.Partial("_WaitingModal")

@Html.Partial("_DescModal")

@Html.AntiForgeryToken()

<div class="row justify-content-end mx-2">
	<button type="button" class="btn btn-success" id="btnReserve">@Resources.Resource.ReserveItems</button>
</div>

<div id="infoblk" data-shop="@Model.User.shopCode" data-shops="@string.Join(",",Model.Shops)" data-enablebuysellunits="@Model.EnableBuySellUnits" data-jsondiciditemoptions="@Model.JsonDicIDItemOptions"></div>

<script src="~/Scripts/ASPSnippets_Pager.min.js"></script>
<script src="~/Scripts/ts/js/reserveitem/index.js?v=@rand"></script>


